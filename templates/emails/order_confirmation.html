{% extends 'emails/base.html' %}

{% block title %}Order Confirmation #{{ order.order_number }} - GiftTree{% endblock %}

{% block content %}
<!-- Success Icon -->
<table role="presentation" cellspacing="0" cellpadding="0" border="0" width="100%">
    <tr>
        <td align="center" style="padding-bottom: 20px;">
            <div style="width: 80px; height: 80px; background: #4CAF50; border-radius: 50%; display: inline-flex; align-items: center; justify-content: center;">
                <span style="color: white; font-size: 40px;">✓</span>
            </div>
        </td>
    </tr>
</table>

<h1 class="email-title">Thank You for Your Order!</h1>

<p class="email-text">
    Hi {{ order.billing_name }},<br><br>
    We've received your order and we're getting it ready. You'll receive a shipping confirmation email with tracking details once your order has been shipped.
</p>

<!-- Order Info Box -->
<div class="info-box">
    <div class="info-box-title">Order Number: #{{ order.order_number }}</div>
    <div style="color: #666666; font-size: 14px;">Order Date: {{ order.created_at|date:"F d, Y" }}</div>
</div>

<!-- Order Items -->
<h3 style="color: #333333; margin: 30px 0 15px;">Order Details</h3>

{% for item in order.items.all %}
<div class="product-item">
    <div class="product-image">
        {% if item.product.primary_image %}
            <img src="{{ site_url }}{{ item.product.primary_image.url }}" alt="{{ item.product_name }}">
        {% else %}
            <div style="width: 80px; height: 80px; background: #f0f0f0; border-radius: 8px;"></div>
        {% endif %}
    </div>
    <div class="product-info">
        <div class="product-name">{{ item.product_name }}</div>
        <div class="product-details">
            {% if item.variant_name %}{{ item.variant_name }} | {% endif %}
            Quantity: {{ item.quantity }} | ₹{{ item.unit_price }} each
        </div>
        <div style="color: #E91E63; font-weight: 600; margin-top: 8px;">
            ₹{{ item.total_price }}
        </div>
    </div>
</div>
{% endfor %}

<!-- Order Summary -->
<div class="order-details" style="margin-top: 30px;">
    <div class="order-row">
        <span class="order-label">Subtotal</span>
        <span class="order-value">₹{{ order.subtotal }}</span>
    </div>
    <div class="order-row">
        <span class="order-label">Delivery Charges</span>
        <span class="order-value">
            {% if order.delivery_charge == 0 %}
                FREE
            {% else %}
                ₹{{ order.delivery_charge }}
            {% endif %}
        </span>
    </div>
    <div class="order-row" style="font-size: 18px;">
        <span class="order-label" style="color: #333333;">Total</span>
        <span class="order-value" style="color: #E91E63;">₹{{ order.total_amount }}</span>
    </div>
</div>

<!-- Delivery Information -->
<h3 style="color: #333333; margin: 30px 0 15px;">Delivery Information</h3>
<div class="order-details">
    <div class="order-row">
        <span class="order-label">Recipient</span>
        <span class="order-value">{{ order.shipping_name }}</span>
    </div>
    <div class="order-row">
        <span class="order-label">Phone</span>
        <span class="order-value">{{ order.shipping_phone }}</span>
    </div>
    <div class="order-row">
        <span class="order-label">Address</span>
        <span class="order-value" style="text-align: right; max-width: 250px;">
            {{ order.shipping_address_line_1 }},
            {% if order.shipping_address_line_2 %}{{ order.shipping_address_line_2 }},{% endif %}
            {{ order.shipping_city }}, {{ order.shipping_state }} - {{ order.shipping_pincode }}
        </span>
    </div>
    {% if order.delivery_date %}
    <div class="order-row">
        <span class="order-label">Delivery Date</span>
        <span class="order-value">{{ order.delivery_date|date:"F d, Y" }}</span>
    </div>
    {% endif %}
    {% if order.delivery_time_slot %}
    <div class="order-row">
        <span class="order-label">Time Slot</span>
        <span class="order-value">{{ order.delivery_time_slot }}</span>
    </div>
    {% endif %}
</div>

<!-- Special Instructions -->
{% if order.special_instructions %}
<div class="info-box" style="background: #fff3e0; border-left-color: #FF9800;">
    <div class="info-box-title" style="color: #F57C00;">Special Instructions</div>
    <div style="color: #666666;">{{ order.special_instructions }}</div>
</div>
{% endif %}

<!-- CTA Button -->
<table role="presentation" cellspacing="0" cellpadding="0" border="0" width="100%">
    <tr>
        <td align="center" style="padding: 20px 0;">
            <a href="{{ site_url }}/orders/{{ order.order_number }}/" class="email-button">
                Track Your Order
            </a>
        </td>
    </tr>
</table>

<p class="email-text" style="text-align: center; margin-top: 30px;">
    Need help? Contact our support team at<br>
    <a href="mailto:support@gifttree.com" style="color: #E91E63;">support@gifttree.com</a> or 
    <a href="tel:+919876543210" style="color: #E91E63;">+91-9876543210</a>
</p>

<p class="email-text" style="text-align: center; color: #999999; font-size: 14px;">
    Thank you for choosing GiftTree! ❤️
</p>
{% endblock %}